* Z:\home\aniket\LTspice\my_files\Draft10.asc
XX2 N014 N018 N016 0 N001 comparator
XX3 N017 N019 N018 N016 sh_ckt
v_ref N015 0 2
V§clock N003 0 PULSE(0 3.3 62.5n 1p 1p 62.5n 125n)
v_start N002 0 PULSE(0 3.3 80n 10p 10p 1045n 1125n)
vin N017 0 SINE(1 1 10k 0 0)
Vdd N016 0 3.3
v_control1 N019 0 PULSE(-3.3 3.3 0 10p 10p 70n 1125n)
XX4 N014 N005 N015 N012 N011 N010 N009 N008 N007 N006 dac_ckt
XX1 N002 N003 N001 N012 N011 N010 N009 N008 N007 N006 N005 N004 sar_new
R1 N004 N013 56k
R2 0 N013 200k

* block symbol definitions
.subckt comparator in ip AVDD AVSS out
M3 N002 N001 AVDD AVDD CMOSP l=0.7u w=1.6u
M4 N001 N001 AVDD AVDD CMOSP l=0.7u w=1.6u
M5 N004 N003 AVSS AVSS CMOSN l=1u w=2.7u m=1
M6 N003 N003 AVSS AVSS CMOSN l=1u w=2.7u m=1
M1 N004 ip N002 N002 CMOSP l=0.7u w=5u m=1
M2 N003 in N002 N002 CMOSP l=0.7u w=5u m=1
M9 out N004 AVSS AVSS CMOSN l=0.925u w=1.225u m=1
M10 out N001 AVDD AVDD CMOSP l=0.95u w=0.575u m=1
I1 N001 AVSS 20µ
.include t14y_tsmc_025_level3.lib
.ends comparator

.subckt sh_ckt in control out vdd
M1 in control out 0 CMOSN l=250n w=20u m=100
M2 out N001 in vdd CMOSP l=250n w=40u m=100
M3 vdd control N001 vdd CMOSP l=250n w=40u m=100
M4 N001 control 0 N002 CMOSN l=250n w=20u m=100
C1 0 out 0.1µ
.INCLUDE t14y_tsmc_025_level3.lib
.ends sh_ckt

.subckt dac_ckt out in7 v_ref in0 in1 in2 in3 in4 in5 in6
C1 N001 N003 .1n
C2 N001 N004 .2n
C3 N001 N005 .4n
C4 N001 N006 .8n
C6 out N007 .1n
C5 out N001 .106667n
C7 N002 out .2n
C8 N008 out .4n
C0 N001 0 .1n
XX9 N009 in7 v_ref 0 t_mux
XX2 N003 in0 v_ref 0 t_mux
XX3 N004 in1 v_ref 0 t_mux
XX4 N005 in2 v_ref 0 t_mux
XX5 N006 in3 v_ref 0 t_mux
XX6 N007 in4 v_ref 0 t_mux
XX7 N002 in5 v_ref 0 t_mux
XX8 N008 in6 v_ref 0 t_mux
C9 out N009 .8n
.INCLUDE t14y_tsmc_025_level3.lib
.ends dac_ckt

.subckt sar_new start clk vin out0 out1 out2 out3 out4 out5 out6 out7 output
A1 N003 0 clk N001 0 0 N004 0 DFLOP
A2 N005 0 clk 0 N001 0 N006 0 DFLOP
A3 N021 0 N006 N004 N002 0 N022 0 DFLOP
A4 N021 0 N008 N006 N002 0 N023 0 DFLOP
V1 N003 0 0
A5 start 0 0 0 0 N002 0 0 BUF
A6 N002 0 clk 0 0 0 N001 0 DFLOP
XX1 N004 N005 rc_delay
A7 N007 0 clk 0 N001 0 N008 0 DFLOP
XX2 N006 N007 rc_delay
A8 N021 0 N010 N008 N002 0 N024 0 DFLOP
A9 N009 0 clk 0 N001 0 N010 0 DFLOP
A10 N021 0 N012 N010 N002 0 N025 0 DFLOP
A11 N011 0 clk 0 N001 0 N012 0 DFLOP
XX3 N008 N009 rc_delay
XX4 N010 N011 rc_delay
A12 N021 0 N014 N012 N002 0 N026 0 DFLOP
A13 N021 0 N016 N014 N002 0 N027 0 DFLOP
A14 N013 0 clk 0 N001 0 N014 0 DFLOP
A15 N015 0 clk 0 N001 0 N016 0 DFLOP
A16 N021 0 N018 N016 N002 0 N028 0 DFLOP
A17 N017 0 clk 0 N001 0 N018 0 DFLOP
A18 N021 0 N020 N018 N002 0 N029 0 DFLOP
A19 N019 0 clk 0 N001 0 N020 0 DFLOP
XX5 N012 N013 rc_delay
XX6 N014 N015 rc_delay
XX7 N016 N017 rc_delay
XX8 N018 N019 rc_delay
E1 out7 0 N022 0 3.3
E2 out6 0 N023 0 3.3
E3 out5 0 N024 0 3.3
E4 out4 0 N025 0 3.3
E5 out3 0 N026 0 3.3
E6 out2 0 N027 0 3.3
E7 out1 0 N028 0 3.3
E8 out0 0 N029 0 3.3
E9 N021 0 vin 0 0.337
A20 N022 0 N030 0 0 0 N031 0 DFLOP
A21 N023 0 N030 0 0 0 N032 0 DFLOP
A22 N024 0 N030 0 0 0 N033 0 DFLOP
A23 N025 0 N030 0 0 0 N034 0 DFLOP
A24 N026 0 N030 0 0 0 N035 0 DFLOP
A25 N027 0 N030 0 0 0 N036 0 DFLOP
A26 N028 0 N030 0 0 0 N037 0 DFLOP
A27 N029 0 N030 0 0 0 N038 0 DFLOP
E10 N039 0 N031 0 1280m
E11 N040 N039 N032 0 640m
E12 N041 N040 N033 0 320m
E13 N042 N041 N034 0 160m
E14 N043 N042 N035 0 80m
E15 N044 N043 N036 0 40m
E16 N045 N044 N037 0 20m
E17 output N045 N038 0 10m
R1 N030 N020 1
C1 N030 0 100p
.ends sar_new

.subckt t_mux out sel in1 in0
M1 N001 sel N002 N003 PMOS l=250n w=40u m=200
M2 N002 sel 0 N004 NMOS l=250n w=20u m=200
vdd N001 0 3.3
XX1 in0 out N002 sel tg_gate
XX2 in1 out sel N002 tg_gate
.include t14y_tsmc_025_level3.lib
.ends t_mux

.subckt rc_delay in out
R1 out in 1
C1 out 0 10p
.ends rc_delay

.subckt tg_gate in out control control_n
M1 in control out N002 NMOS l=250n w=20u m=100
M2 out control_n in N001 PMOS l=250u w=40u m=100
V1 N001 0 3.3
.INCLUDE t14y_tsmc_025_level3.lib
.ends tg_gate

.model NMOS NMOS
.model PMOS PMOS
.lib C:\users\aniket\My Documents\LTspiceXVII\lib\cmp\standard.mos
.tran 1m
.option cshunt=1e-15 reltol=0.003 abstol=1e-10 gmin=1e-10
* ideal ac output
.backanno
.end
